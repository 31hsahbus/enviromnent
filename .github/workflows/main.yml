name: simple-three-Env
on:
   workflow_dispatch:
jobs:
    DEV:
       runs-on: ubuntu-latest
       environment: DEV
       
       steps:
         - uses: actions/checkout@v2
         - name: Run a script
           env:
            DEMO: ${{secrets.MY_SECRET}}
           run: |
             echo "i am running a job in DEV environment"
             echo "demo value is:${{env.DEMO}}" 


    QA:
      
       runs-on: ubuntu-latest
       environment: QA
       
       needs: DEV
       steps:
         - uses: actions/checkout@v2
         - name: Run a script
           env:
            MSG: COMPLETED 
           run: |
             echo "i am running a job in QA environment"
             echo "QA job  is:${{env.MSG}}"

    PROD:
       runs-on: ubuntu-latest
       environment: PROD
       
       needs: [ DEV , QA ]
       steps:
         - uses: actions/checkout@v2
         - name: Run a script
           env: 
            MSG: Approved
           run: |
             echo "i am running a job in PROD environment"
             echo "DEMO value  is:${{needs.DEV.steps.env.DEMO}}"
             echo "QA job  is:${{needs.QA.steps.env.MSG}}"
             echo "PROD job  is:${{env.MSG}}"
